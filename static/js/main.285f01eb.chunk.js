(this.webpackJsonpmodern_react_navbar=this.webpackJsonpmodern_react_navbar||[]).push([[0],{200:function(e,t,c){},375:function(e,t,c){},379:function(e,t,c){},382:function(e,t,c){var s={"./0.svg":[406,3],"./1.svg":[407,4],"./10.svg":[408,5],"./100.svg":[409,6],"./11.svg":[410,7],"./12.svg":[411,8],"./13.svg":[412,9],"./14.svg":[413,10],"./15.svg":[414,11],"./16.svg":[415,12],"./17.svg":[416,13],"./18.svg":[417,14],"./19.svg":[418,15],"./2.svg":[419,16],"./20.svg":[420,17],"./21.svg":[421,18],"./22.svg":[422,19],"./23.svg":[423,20],"./24.svg":[424,21],"./25.svg":[425,22],"./26.svg":[426,23],"./27.svg":[427,24],"./28.svg":[428,25],"./29.svg":[429,26],"./3.svg":[430,27],"./30.svg":[431,28],"./31.svg":[432,29],"./32.svg":[433,30],"./33.svg":[434,31],"./34.svg":[435,32],"./35.svg":[436,33],"./36.svg":[437,34],"./37.svg":[438,35],"./38.svg":[439,36],"./39.svg":[440,37],"./4.svg":[441,38],"./40.svg":[442,39],"./41.svg":[443,40],"./42.svg":[444,41],"./43.svg":[445,42],"./44.svg":[446,43],"./45.svg":[447,44],"./46.svg":[448,45],"./47.svg":[449,46],"./48.svg":[450,47],"./49.svg":[451,48],"./5.svg":[452,49],"./50.svg":[453,50],"./51.svg":[454,51],"./52.svg":[455,52],"./53.svg":[456,53],"./54.svg":[457,54],"./55.svg":[458,55],"./56.svg":[459,56],"./57.svg":[460,57],"./58.svg":[461,58],"./59.svg":[462,59],"./6.svg":[463,60],"./60.svg":[464,61],"./61.svg":[465,62],"./62.svg":[466,63],"./63.svg":[467,64],"./64.svg":[468,65],"./65.svg":[469,66],"./66.svg":[470,67],"./67.svg":[471,68],"./68.svg":[472,69],"./69.svg":[473,70],"./7.svg":[474,71],"./70.svg":[475,72],"./71.svg":[476,73],"./72.svg":[477,74],"./73.svg":[478,75],"./74.svg":[479,76],"./75.svg":[480,77],"./76.svg":[481,78],"./77.svg":[482,79],"./78.svg":[483,80],"./79.svg":[484,81],"./8.svg":[485,82],"./80.svg":[486,83],"./81.svg":[487,84],"./82.svg":[488,85],"./83.svg":[489,86],"./84.svg":[490,87],"./85.svg":[491,88],"./86.svg":[492,89],"./87.svg":[493,90],"./88.svg":[494,91],"./89.svg":[495,92],"./9.svg":[496,93],"./90.svg":[497,94],"./91.svg":[498,95],"./92.svg":[499,96],"./93.svg":[500,97],"./94.svg":[501,98],"./95.svg":[502,99],"./96.svg":[503,100],"./97.svg":[504,101],"./98.svg":[505,102],"./99.svg":[506,103]};function a(e){if(!c.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],a=t[0];return c.e(t[1]).then((function(){return c(a)}))}a.keys=function(){return Object.keys(s)},a.id=382,e.exports=a},384:function(e,t,c){},392:function(e,t){},394:function(e,t){},403:function(e,t,c){},404:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),r=c(26),n=c.n(r),i=(c(199),c(511)),l=c(17),o=c(20),u=(c(200),c(194)),j=(c(375),c(13)),d=c.n(j),b=c(16),x=c(8),h=c(190),p=(c(376),c(405),h.a.initializeApp({apiKey:"AIzaSyAaBlsJsd_p9RK6rd8Z0BqIh9SeQ6sGjDA",authDomain:"chat-app-e3fef.firebaseapp.com",projectId:"chat-app-e3fef",storageBucket:"chat-app-e3fef.appspot.com",messagingSenderId:"293479775714",appId:"1:293479775714:web:14d262a04c59e4e86f8dbb",measurementId:"G-8N6DY58FPK"})),v=p.auth(),f=p,O=c(15),m=c.n(O),g=c(4),y=a.a.createContext();function w(){return Object(s.useContext)(y)}function N(e){var t=e.children,c=Object(s.useState)(),a=Object(x.a)(c,2),r=a[0],n=a[1],i=Object(s.useState)(!0),l=Object(x.a)(i,2),o=l[0],u=l[1],j=Object(s.useState)(),h=Object(x.a)(j,2),p=h[0],f=h[1];Object(s.useEffect)((function(){return v.onAuthStateChanged((function(e){n(e),u(!1)}))}),[]),Object(s.useEffect)(Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,m.a.get("https://api.chatengine.io/users/",{headers:{"private-key":"e8bc094d-c2f4-48ea-86fe-af5a9c51f2c2"}});case 3:t=e.sent,f(t.data.filter((function(e){return e.email!=r.email})));case 5:case"end":return e.stop()}}),e)}))),[r]);var O={currentUser:r,usersChat:p,login:function(e,t){return v.signInWithEmailAndPassword(e,t)},signup:function(e,t){return v.createUserWithEmailAndPassword(e,t)},logout:function(){return v.signOut()},resetPassword:function(e){return v.sendPasswordResetEmail(e)},updateEmail:function(e){return r.updateEmail(e)},updatePassword:function(e){return r.updatePassword(e)}};return Object(g.jsx)(y.Provider,{value:O,children:!o&&t})}var k=function(){var e=w().currentUser;return null!=e?Object(g.jsx)(u.d,{height:"95vh",projectID:"7637b906-c83c-4ef7-a194-25c5224671ba",userName:e.email.split("@")[0],userSecret:e.uid}):"Connectez vous"},C=(c(379),{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#FFF",padding:"50px",zIndex:1e3,height:"500px",width:"450px",display:"flex",flexDirection:"column",justifyContent:"space-around"}),S={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, .7)",zIndex:1e3},P={fontSize:"32px",textShadow:"-1px -1px #0c0, 1px 1px #060, -3px 0 4px #000",fontFamily:"Arial, Helvetica, sans-serif",color:"#090",padding:"16px",fontWeight:"lighter",textAlign:"center",display:"block",margin:"rgba16px"},E={display:"flex",justifyContent:"space-around"},R={width:"95px",marginTop:"10px"};var U=function(e){var t=Object(o.g)(),a=w().currentUser,r=Object(s.useState)(null),i=Object(x.a)(r,2),l=i[0],u=i[1];return Object(s.useEffect)((function(){c(382)("./".concat(e.svgNumber,".svg")).then((function(e){u(e.default)}))}),[]),n.a.createPortal(Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:S}),Object(g.jsxs)("div",{style:C,children:[null!=l&&Object(g.jsx)("img",{src:l}),Object(g.jsx)("div",{style:P,children:e.messageResult}),Object(g.jsxs)("div",{style:E,children:[Object(g.jsx)("button",{onClick:function(){e.setMatchResult(null),null==a?t.push("/login"):t.push("/chat")},style:R,children:"Chatroom"}),Object(g.jsx)("button",{onClick:function(){e.setMatchResult(null)},style:R,children:"Exit"})]})]})]}),document.getElementById("portal"))},F=a.a.createContext();function I(e){var t=e.children,c=Object(s.useRef)(),a=Object(s.useState)(!1),r=Object(x.a)(a,2),n=r[0],i=r[1],l=Object(s.useState)(""),o=Object(x.a)(l,2),u=o[0],j=o[1],d=Object(s.useState)(null),b=Object(x.a)(d,2),h={peer:c,showVideoCall:n,setShowVideoCall:i,currentCallState:u,setCurrentCallState:j,callInformation:b[0],setCallInformation:b[1]};return Object(g.jsx)(F.Provider,{value:h,children:t})}var L=c(512),z=c(515),D=c(514),A=c(513),W=c(510);function G(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=w(),a=c.login,r=c.currentUser,n=Object(s.useState)(""),i=Object(x.a)(n,2),u=i[0],j=i[1],h=Object(s.useState)(!1),p=Object(x.a)(h,2),v=p[0],f=p[1],O=Object(s.useState)(!0),m=Object(x.a)(O,2),y=m[0],N=m[1],k=Object(o.g)();function C(){return(C=Object(b.a)(d.a.mark((function c(s){return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),c.prev=1,j(""),f(!0),c.next=6,a(e.current.value,t.current.value);case 6:console.log(r),N(!1),k.push("/"),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),j("Failed to log in");case 14:f(!1);case 15:case"end":return c.stop()}}),c,null,[[1,11]])})))).apply(this,arguments)}return Object(g.jsxs)(L.a,{show:y,centered:!0,children:[Object(g.jsxs)(z.a,{children:[Object(g.jsxs)(z.a.Body,{children:[Object(g.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),u&&Object(g.jsx)(D.a,{variant:"danger",children:u}),Object(g.jsxs)(A.a,{onSubmit:function(e){return C.apply(this,arguments)},children:[Object(g.jsxs)(A.a.Group,{id:"email",children:[Object(g.jsx)(A.a.Label,{children:"Email"}),Object(g.jsx)(A.a.Control,{type:"email",ref:e,required:!0})]}),Object(g.jsxs)(A.a.Group,{id:"password",children:[Object(g.jsx)(A.a.Label,{children:"Password"}),Object(g.jsx)(A.a.Control,{type:"password",ref:t,required:!0})]}),Object(g.jsx)(W.a,{disabled:v,className:"w-100",type:"submit",children:"Log In"})]}),Object(g.jsx)("div",{className:"w-100 text-center mt-3",children:Object(g.jsx)(l.b,{to:"/forgot-password",children:"Forgot Password?"})})]}),Object(g.jsx)(L.a.Footer,{children:Object(g.jsx)(W.a,{variant:"primary",onClick:function(){return N(!1)},children:"Exit"})})]}),Object(g.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(g.jsx)(l.b,{to:"/signup",children:"Sign Up"})]})]})}var B=function(){var e=Object(s.useContext)(F),t=(e.showVideoCall,e.currentCallState,e.callInformation),c=(e.setCallInformation,e.setShowVideoCall,w()),a=(c.usersChat,c.currentUser),r=Object(s.useRef)(),n=Object(s.useRef)(),l=Object(s.useState)(null),o=Object(x.a)(l,2),u=o[0],j=o[1];return Object(s.useEffect)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||null==a){e.next=16;break}return e.prev=1,e.next=4,f.firestore().collection("calls").doc(a.email).delete();case 4:return console.log("Current successfully deleted!"),e.next=7,f.firestore().collection("destroy").doc(a.email);case 7:if(e.t0=e.sent,null==e.t0){e.next=11;break}return e.next=11,f.firestore().collection("destroy").doc(a.email).delete();case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),console.error("Error removing document: ",e.t1);case 16:if(!t||null==t){e.next=32;break}return e.prev=17,e.next=20,f.firestore().collection("calls").doc(t.from).delete();case 20:return console.log("Other successfully deleted!"),e.next=23,f.firestore().collection("destroy").doc(t.from);case 23:if(e.t2=e.sent,null==e.t2){e.next=27;break}return e.next=27,f.firestore().collection("destroy").doc(t.from).delete();case 27:e.next=32;break;case 29:e.prev=29,e.t3=e.catch(17),console.error("Error removing document: ",e.t3);case 32:case"end":return e.stop()}}),e,null,[[1,13],[17,29]])}))),[]),a&&null!=a?null===u?Object(g.jsxs)("form",{className:"home",onSubmit:function(e){e.preventDefault(),fetch("https://love-calculator.p.rapidapi.com/getPercentage?fname=".concat(r.current.value,"&sname=").concat(n.current.value),{method:"GET",headers:{"x-rapidapi-key":"36f99601d0mshff227eef7694e85p164d14jsn84b0ebf94d9e","x-rapidapi-host":"love-calculator.p.rapidapi.com"}}).then((function(e){return e.json()})).then((function(e){console.log(e),j(e)})).catch((function(e){console.log("err")}))},children:[Object(g.jsxs)("div",{className:"form",children:[Object(g.jsx)("input",{type:"text",placeholder:"Your Name",required:!0,autocomplete:"off",ref:r}),Object(g.jsx)("label",{for:"name",className:"label-name",children:Object(g.jsx)("span",{className:"content-name"})})]}),Object(g.jsxs)("div",{className:"form",children:[Object(g.jsx)("input",{type:"text",placeholder:"Match Name",required:!0,autocomplete:"off",ref:n}),Object(g.jsx)("label",{for:"name",className:"label-name",children:Object(g.jsx)("span",{className:"content-name"})})]}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{type:"submit",value:"Run",className:"button"})})]}):Object(g.jsx)(U,{svgNumber:u.percentage,messageResult:u.result,setMatchResult:j}):Object(g.jsx)(i.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(g.jsx)(G,{})})})},H=(c(384),c(38)),T=c.n(H),q=c(98),M=c(126),J=c(193),_=c(0),V=c(50),K=function(){var e=w().currentUser,t=Object(o.h)();function c(){var e=T()("#navbarSupportedContent").find(".active"),t=e.innerHeight(),c=e.innerWidth(),s=e.position(),a=e.position();T()(".hori-selector").css({top:s.top+"px",left:a.left+"px",height:t+"px",width:c+"px"}),T()("#navbarSupportedContent").on("click","li",(function(e){T()("#navbarSupportedContent ul li").removeClass("active"),T()(this).addClass("active");var t=T()(this).innerHeight(),c=T()(this).innerWidth(),s=T()(this).position(),a=T()(this).position();T()(".hori-selector").css({top:s.top+"px",left:a.left+"px",height:t+"px",width:c+"px"})}))}return console.log(t),Object(s.useEffect)((function(){c(),T()(window).on("resize",(function(){setTimeout((function(){c()}),500)}))}),[]),Object(g.jsx)(_.b.Provider,{value:{size:"22px",style:{verticalAlign:"middle",marginRight:"7.5px",marginBottom:"3px"}},children:Object(g.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-mainbg",children:[Object(g.jsx)(l.c,{className:"navbar-brand navbar-logo",to:"/",exact:!0,children:"SalKat Love Calculator"}),Object(g.jsx)("button",{className:"navbar-toggler",onClick:function(){setTimeout((function(){c()}))},type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(g.jsx)("i",{className:"fas fa-bars text-white"})}),Object(g.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:null!=e?Object(g.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(g.jsxs)("div",{className:"hori-selector",children:[Object(g.jsx)("div",{className:"left"}),Object(g.jsx)("div",{className:"right"})]}),Object(g.jsx)("li",{className:"nav-item active",style:{backgroundColor:"/"===t.pathname?"rgba(255,255,255,0.15)":null},children:Object(g.jsxs)(l.c,{className:"nav-link",to:"/",exact:!0,children:[Object(g.jsx)(q.a,{}),"Home"]})}),Object(g.jsx)("li",{className:"nav-item",style:{backgroundColor:"/my-account"===t.pathname?"rgba(255,255,255,0.15)":null},children:Object(g.jsxs)(l.c,{className:"nav-link",to:"/my-account",exact:!0,children:[Object(g.jsx)(M.a,{}),"My Account"]})}),Object(g.jsx)("li",{className:"nav-item",style:{backgroundColor:"/chat"===t.pathname?"rgba(255,255,255,0.15)":null},children:Object(g.jsxs)(l.c,{className:"nav-link",to:"/chat",exact:!0,children:[Object(g.jsx)(J.a,{}),"Chatroom"]})}),Object(g.jsx)("li",{className:"nav-item",style:{backgroundColor:"/call"===t.pathname?"rgba(255,255,255,0.15)":null},children:Object(g.jsxs)(l.c,{className:"nav-link",to:"/call",exact:!0,children:[Object(g.jsx)(V.a,{}),"PeerToPeerCall"]})})]}):Object(g.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(g.jsxs)("div",{className:"hori-selector",children:[Object(g.jsx)("div",{className:"left"}),Object(g.jsx)("div",{className:"right"})]}),Object(g.jsx)("li",{className:"nav-item active",style:{backgroundColor:"/"===t.pathname?"rgba(255,255,255,0.15)":null},children:Object(g.jsxs)(l.c,{className:"nav-link",to:"/",exact:!0,children:[Object(g.jsx)(q.a,{}),"Home"]})}),Object(g.jsx)("li",{className:"nav-item",style:{backgroundColor:"/signup"===t.pathname?"rgba(255,255,255,0.15)":null},children:Object(g.jsxs)(l.c,{className:"nav-link",to:"/signup",exact:!0,children:[Object(g.jsx)(M.b,{}),"Signup"]})}),Object(g.jsx)("li",{className:"nav-item",style:{backgroundColor:"/login"===t.pathname?"rgba(255,255,255,0.15)":null},children:Object(g.jsxs)(l.c,{className:"nav-link",to:"/login",exact:!0,children:[Object(g.jsx)(q.b,{}),"Login"]})})]})})]})})},Y=c(127);c(403);var Q=function(){var e=w(),t=e.usersChat,c=e.currentUser;console.log(t);var a=Object(s.useRef)(),r=Object(s.useRef)(),n=Object(s.useRef)(),i=Object(s.useRef)(),l=Object(s.useRef)(),o=Object(s.useState)(!0),u=Object(x.a)(o,2),j=(u[0],u[1],Object(s.useState)(!1)),h=Object(x.a)(j,2),p=h[0],v=h[1],O=Object(s.useState)("show"),m=Object(x.a)(O,2),y=m[0],N=m[1],k=Object(s.useState)({text:"Receiver video",user:""}),C=Object(x.a)(k,2),S=C[0],P=C[1],E=Object(s.useState)(null),R=Object(x.a)(E,2),U=R[0],F=R[1];Object(s.useEffect)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:r.current.srcObject=e.sent,r.current.play();case 4:case"end":return e.stop()}}),e)}))),[]),Object(s.useEffect)(Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.firestore().collection("calls").doc(c.email).onSnapshot(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data()){e.next=37;break}if("offer"!==t.data().type){e.next=7;break}F(t.data()),v(!1),P({text:"call from ",user:t.data().from}),e.next=35;break;case 7:if("accept"!==t.data().type){e.next=14;break}v(!0),P({text:"",user:""}),a.current.signal(JSON.parse(t.data().sd)),a.current.on("stream",(function(e){n.current.srcObject=e,n.current.play()})),e.next=35;break;case 14:if("refuse"!==t.data().type){e.next=29;break}return e.prev=15,e.next=18,f.firestore().collection("calls").doc(t.data().from).delete();case 18:return e.next=20,f.firestore().collection("calls").doc(c.email).delete();case 20:P({text:"The call was not accepted fromby",user:t.data().from.split("@")[0]}),N("show"),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(15),console.log(e.t0);case 27:e.next=35;break;case 29:if("destroy"!==t.data().type){e.next=35;break}return P({text:"The call was destroyed by",user:t.data().from.split("@")[0]}),v(!1),N("show"),e.next=35,f.firestore().collection("calls").doc(c.email).delete();case 35:e.next=38;break;case 37:F(null);case 38:case"end":return e.stop()}}),e,null,[[15,24]])})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)}))),[]);var I=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("show"!==y){e.next=9;break}if(""!==i.current.value){e.next=3;break}return e.abrupt("return");case 3:return N(""),v(!1),P({text:"Try to establish a connection",user:i.current.value.split("@")[0]}),a.current=new Y({initiator:!0,stream:r.current.srcObject,trickle:!1,config:{iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10}}),a.current.on("signal",function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.firestore().collection("calls").doc(i.current.value).set({type:"offer",from:c.email,sd:JSON.stringify(t)});case 3:e.sent,P({text:"Waiting for answer from",user:i.current.value.split("@")[0],color:""}),N("noshow"),l.current=i.current.value,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return");case 9:if("noshow"!==y){e.next=35;break}if(e.prev=10,null==U){e.next=20;break}return e.next=14,f.firestore().collection("calls").doc(U.from).delete();case 14:return e.next=16,f.firestore().collection("calls").doc(c.email).delete();case 16:return e.next=18,f.firestore().collection("calls").doc(U.from).set({type:"destroy",from:c.email});case 18:e.next=26;break;case 20:return e.next=22,f.firestore().collection("calls").doc(l.current).delete();case 22:return e.next=24,f.firestore().collection("calls").doc(c.email).delete();case 24:return e.next=26,f.firestore().collection("calls").doc(i.current.value).set({type:"destroy",from:c.email});case 26:a.current.destroy(),P({text:"The call is destroyed ...",user:""}),N("show"),v(!1),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(10),console.log(e.t0);case 35:case"end":return e.stop()}}),e,null,[[10,32]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"video",children:[Object(g.jsxs)("div",{className:"video-item",children:[Object(g.jsx)("video",{ref:r}),Object(g.jsxs)("div",{className:"video-item-actions",children:[Object(g.jsxs)("select",{name:"pets",id:"pet-select",ref:i,children:[Object(g.jsx)("option",{value:"",children:"--Please choose who to call--"}),t&&t.map((function(e,t){return Object(g.jsx)("option",{value:e.email,children:e.email.split("@")[0]})}))]}),("show"===y||"noshow"===y)&&Object(g.jsxs)("div",{className:"show"===y?"video-item-icon":"video-item-icon2",onClick:I,children:["show"===y&&Object(g.jsx)(V.a,{size:32}),"noshow"===y&&Object(g.jsx)(V.b,{size:32})]})]})]}),Object(g.jsxs)("div",{className:"video-item",children:[p?Object(g.jsx)("video",{ref:n}):null!=U&&!p&&Object(g.jsxs)("div",{className:"video-item-no-video",children:[Object(g.jsxs)("span",{children:["call from ",Object(g.jsx)("span",{style:{fontWeight:"bold"},children:U.from.split("@")[0]})]}),Object(g.jsxs)("div",{className:"video-item-no-video-answerCall",children:[Object(g.jsx)("div",{style:{width:"50%"},children:Object(g.jsx)("div",{className:"video-item-icon",style:{width:"40px"},onClick:function(){a.current=new Y({initiator:!1,stream:r.current.srcObject,trickle:!1,config:{iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10}}),a.current.signal(JSON.parse(U.sd)),a.current.on("signal",(function(e){try{f.firestore().collection("calls").doc(U.from).set({type:"accept",from:c.email,sd:JSON.stringify(e)}),P({text:"",user:""}),N("noshow")}catch(t){console.log(t)}})),a.current.on("stream",(function(e){P({text:"",user:""}),v(!0),n.current.srcObject=e,n.current.play()}))},children:Object(g.jsx)(V.a,{size:32})})}),Object(g.jsx)("div",{style:{width:"50%"},children:Object(g.jsx)("div",{className:"video-item-icon2",style:{width:"40px"},onClick:function(){try{f.firestore().collection("calls").doc(U.from).set({type:"refuse",from:c.email}),F(null),P({text:"Call refused ...",user:""}),N("show")}catch(e){console.log(e)}},children:Object(g.jsx)(V.b,{size:32})})})]})]}),Object(g.jsx)("div",{className:"video-item-text",children:Object(g.jsxs)("p",{children:[S.text," ",Object(g.jsx)("span",{className:"video-item-text-username",children:S.user})]})})]})]})};var Z=function(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=Object(s.useRef)(),a=w(),r=a.signup,n=(a.currentUser,Object(s.useState)("")),i=Object(x.a)(n,2),u=i[0],j=i[1],h=Object(s.useState)(!1),p=Object(x.a)(h,2),v=p[0],f=p[1],O=Object(s.useState)(!0),y=Object(x.a)(O,2),N=y[0],k=y[1],C=Object(o.g)();function S(){return(S=Object(b.a)(d.a.mark((function s(a){var n,i,l;return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a.preventDefault(),t.current.value===c.current.value){s.next=3;break}return s.abrupt("return",j("Passwords do not match"));case 3:return s.prev=3,j(""),f(!0),s.next=8,r(e.current.value,t.current.value);case 8:n=s.sent,(i=new FormData).append("email",n.user.email),i.append("username",n.user.email.split("@")[0]),i.append("secret",n.user.uid),l=m.a.post("https://api.chatengine.io/users",i,{headers:{"private-key":"e8bc094d-c2f4-48ea-86fe-af5a9c51f2c2"}}),console.log(l),k(!1),C.push("/"),s.next=22;break;case 19:s.prev=19,s.t0=s.catch(3),j("Failed to create an account");case 22:f(!1);case 23:case"end":return s.stop()}}),s,null,[[3,19]])})))).apply(this,arguments)}return Object(g.jsxs)(L.a,{show:N,centered:!0,children:[Object(g.jsxs)(z.a,{children:[Object(g.jsxs)(z.a.Body,{children:[Object(g.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),u&&Object(g.jsx)(D.a,{variant:"danger",children:u}),Object(g.jsxs)(A.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(g.jsxs)(A.a.Group,{id:"email",children:[Object(g.jsx)(A.a.Label,{children:"Email"}),Object(g.jsx)(A.a.Control,{type:"email",ref:e,required:!0})]}),Object(g.jsxs)(A.a.Group,{id:"password",children:[Object(g.jsx)(A.a.Label,{children:"Password"}),Object(g.jsx)(A.a.Control,{type:"password",ref:t,required:!0})]}),Object(g.jsxs)(A.a.Group,{id:"password-confirm",children:[Object(g.jsx)(A.a.Label,{children:"Password Confirmation"}),Object(g.jsx)(A.a.Control,{type:"password",ref:c,required:!0})]}),Object(g.jsx)(W.a,{disabled:v,className:"w-100",type:"submit",children:"Sign Up"})]})]}),Object(g.jsx)(z.a.Footer,{children:Object(g.jsx)(W.a,{variant:"primary",onClick:function(){return k(!1)},children:"Exit"})})]}),Object(g.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(g.jsx)(l.b,{to:"/login",children:"Log In"})]})]})};var X=function(){var e=Object(s.useState)(""),t=Object(x.a)(e,2),c=t[0],a=t[1],r=Object(s.useState)(!0),n=Object(x.a)(r,2),i=n[0],u=n[1],j=w(),h=j.currentUser,p=j.logout,v=Object(o.g)();function f(){return(f=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),e.prev=1,e.next=4,p();case 4:v.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(g.jsxs)(L.a,{show:i,centered:!0,children:[Object(g.jsxs)(z.a,{children:[Object(g.jsxs)(z.a.Body,{children:[Object(g.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),c&&Object(g.jsx)(D.a,{variant:"danger",children:c}),Object(g.jsx)("strong",{children:"Email:"})," ",null!=h&&h.email,Object(g.jsx)(l.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]}),Object(g.jsx)(z.a.Footer,{children:Object(g.jsx)(W.a,{variant:"primary",onClick:function(){return u(!1)},children:"Exit"})})]}),Object(g.jsx)("div",{className:"w-100 text-center mt-2",children:Object(g.jsx)(W.a,{variant:"link",onClick:function(){return f.apply(this,arguments)},children:"Log Out"})})]})};function $(){var e=Object(s.useRef)(),t=w().resetPassword,c=Object(s.useState)(""),a=Object(x.a)(c,2),r=a[0],n=a[1],i=Object(s.useState)(""),o=Object(x.a)(i,2),u=o[0],j=o[1],h=Object(s.useState)(!1),p=Object(x.a)(h,2),v=p[0],f=p[1],O=Object(s.useState)(!0),m=Object(x.a)(O,2),y=m[0],N=m[1];function k(){return(k=Object(b.a)(d.a.mark((function c(s){return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),c.prev=1,j(""),n(""),f(!0),c.next=7,t(e.current.value);case 7:j("Check your inbox for further instructions"),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),n("Failed to reset password");case 13:f(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(g.jsxs)(L.a,{show:y,centered:!0,children:[Object(g.jsxs)(z.a,{children:[Object(g.jsxs)(z.a.Body,{children:[Object(g.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),r&&Object(g.jsx)(D.a,{variant:"danger",children:r}),u&&Object(g.jsx)(D.a,{variant:"success",children:u}),Object(g.jsxs)(A.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(g.jsxs)(A.a.Group,{id:"email",children:[Object(g.jsx)(A.a.Label,{children:"Email"}),Object(g.jsx)(A.a.Control,{type:"email",ref:e,required:!0})]}),Object(g.jsx)(W.a,{disabled:v,className:"w-100",type:"submit",children:"Reset Password"})]}),Object(g.jsx)("div",{className:"w-100 text-center mt-3",children:Object(g.jsx)(l.b,{to:"/login",children:"Login"})})]}),Object(g.jsx)(z.a.Footer,{children:Object(g.jsx)(W.a,{variant:"primary",onClick:function(){return N(!1)},children:"Exit"})})]}),Object(g.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(g.jsx)(l.b,{to:"/signup",children:"Sign Up"})]})]})}function ee(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=Object(s.useRef)(),a=w(),r=a.currentUser,n=a.updatePassword,i=a.updateEmail,u=Object(s.useState)(""),j=Object(x.a)(u,2),d=j[0],b=j[1],h=Object(s.useState)(!1),p=Object(x.a)(h,2),v=p[0],f=p[1],O=Object(s.useState)(!0),m=Object(x.a)(O,2),y=m[0],N=m[1],k=Object(o.g)();return Object(g.jsxs)(L.a,{show:y,centered:!0,children:[Object(g.jsxs)(z.a,{children:[Object(g.jsxs)(z.a.Body,{children:[Object(g.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),d&&Object(g.jsx)(D.a,{variant:"danger",children:d}),Object(g.jsxs)(A.a,{onSubmit:function(s){if(s.preventDefault(),t.current.value!==c.current.value)return b("Passwords do not match");var a=[];f(!0),b(""),e.current.value!==r.email&&a.push(i(e.current.value)),t.current.value&&a.push(n(t.current.value)),Promise.all(a).then((function(){k.push("/")})).catch((function(){b("Failed to update account")})).finally((function(){f(!1)}))},children:[Object(g.jsxs)(A.a.Group,{id:"email",children:[Object(g.jsx)(A.a.Label,{children:"Email"}),Object(g.jsx)(A.a.Control,{type:"email",ref:e,required:!0,defaultValue:null!=r&&r.email})]}),Object(g.jsxs)(A.a.Group,{id:"password",children:[Object(g.jsx)(A.a.Label,{children:"Password"}),Object(g.jsx)(A.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})]}),Object(g.jsxs)(A.a.Group,{id:"password-confirm",children:[Object(g.jsx)(A.a.Label,{children:"Password Confirmation"}),Object(g.jsx)(A.a.Control,{type:"password",ref:c,placeholder:"Leave blank to keep the same"})]}),Object(g.jsx)(W.a,{disabled:v,className:"w-100",type:"submit",children:"Update"})]})]}),Object(g.jsx)(z.a.Footer,{children:Object(g.jsx)(W.a,{variant:"primary",onClick:function(){return N(!1)},children:"Exit"})})]}),Object(g.jsx)("div",{className:"w-100 text-center mt-2",children:Object(g.jsx)(l.b,{to:"/",children:"Cancel"})})]})}var te=function(){return Object(g.jsx)(I,{children:Object(g.jsx)(N,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(l.a,{children:[Object(g.jsx)(K,{}),Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{path:"/",exact:!0,children:Object(g.jsx)(B,{})}),Object(g.jsx)(o.b,{path:"/forgot-password",exact:!0,children:Object(g.jsx)(i.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(g.jsx)($,{})})})}),Object(g.jsx)(o.b,{path:"/signup",exact:!0,children:Object(g.jsx)(i.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(g.jsx)(Z,{})})})}),Object(g.jsx)(o.b,{path:"/login",exact:!0,children:Object(g.jsx)(i.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(g.jsx)(G,{})})})}),Object(g.jsx)(o.b,{path:"/my-account",exact:!0,children:Object(g.jsx)(i.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(g.jsx)(X,{})})})}),Object(g.jsx)(o.b,{path:"/update-profile",exact:!0,children:Object(g.jsx)(i.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(g.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(g.jsx)(ee,{})})})}),Object(g.jsx)(o.b,{path:"/chat",exact:!0,children:Object(g.jsx)(k,{})}),Object(g.jsx)(o.b,{path:"/call",exact:!0,children:Object(g.jsx)(Q,{})}),Object(g.jsx)(o.a,{to:"/"})]})]})})})})};n.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(te,{})}),document.getElementById("root"))}},[[404,1,2]]]);
//# sourceMappingURL=main.285f01eb.chunk.js.map