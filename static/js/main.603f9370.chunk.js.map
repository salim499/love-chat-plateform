{"version":3,"sources":["Components/firebase.js","Contexts/AuthContext.js","Contexts/PeerContext.js","Components/ChatRoomHeader.js","pages/ChatRoom.js","Components/Navbar.js","Components/videoCallContainer.js","Components/SignUp.js","Components/Login.js","Components/Profil.js","Components/ForgotPassword.js","Components/UpdateProfile.js","App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","AuthContext","React","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","usersChat","setChatUsers","useEffect","onAuthStateChanged","user","a","axios","get","headers","process","res","data","filter","e","email","value","login","password","signInWithEmailAndPassword","signup","createUserWithEmailAndPassword","logout","signOut","resetPassword","sendPasswordResetEmail","updateEmail","updatePassword","Provider","PeerContext","usePeer","PeerProvider","peer","useRef","showVideoCall","setShowVideoCall","currentCallState","setCurrentCallState","obj","callInformation","setCallInformation","ChatRoomHeader","props","firestore","collection","doc","onSnapshot","snapshot","type","console","log","className","title","color","size","onClick","ChatRoom","height","projectID","userName","split","userSecret","uid","renderChatHeader","chat","Navbar","animation","activeItemNewAnim","$","find","activeWidthNewAnimHeight","innerHeight","activeWidthNewAnimWidth","innerWidth","itemPosNewAnimTop","position","itemPosNewAnimLeft","css","top","left","on","removeClass","this","addClass","window","setTimeout","style","verticalAlign","marginRight","marginBottom","to","exact","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","VideoCallContainer","videoEmitter","videoReceiver","answerCall","setAnswerCall","cameraOn","setCameraOn","soundOn","setSoundOn","navigator","mediaDevices","getUserMedia","video","audio","current","srcObject","play","Peer","initiator","stream","trickle","config","iceServers","urls","iceCandidatePoolSize","addCall","set","from","sd","JSON","stringify","signal","parse","handleCameraOnOff","getVideoTracks","enabled","handleSoundOnOff","getAudioTracks","Modal","show","centered","ref","destroy","SignUp","emailRef","passwordRef","passwordConfirmRef","error","setError","setShow","preventDefault","signupData","formdata","FormData","append","post","useHistory","Card","Body","Alert","variant","Form","onSubmit","Group","Label","Control","required","Button","disabled","Footer","Login","Dashboard","history","push","ForgotPassword","message","setMessage","UpdateProfile","promises","Promise","all","then","catch","finally","defaultValue","placeholder","App","path","Container","minHeight","maxWidth","Profil","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.603f9370.chunk.js","sourcesContent":["import firebase from \"firebase/app\"\r\nimport \"firebase/auth\"\r\nimport 'firebase/firestore'\r\nconst app = firebase.initializeApp({\r\n  apiKey: \"AIzaSyAaBlsJsd_p9RK6rd8Z0BqIh9SeQ6sGjDA\",\r\n  authDomain: \"chat-app-e3fef.firebaseapp.com\",\r\n  projectId: \"chat-app-e3fef\",\r\n  storageBucket: \"chat-app-e3fef.appspot.com\",\r\n  messagingSenderId: \"293479775714\",\r\n  appId: \"1:293479775714:web:14d262a04c59e4e86f8dbb\",\r\n  measurementId: \"G-8N6DY58FPK\"\r\n})\r\n\r\nexport const auth = app.auth()\r\nexport default app","import React, { useContext, useState, useEffect } from \"react\"\r\nimport { auth } from \"../Components/firebase\"\r\nimport axios from 'axios'\r\nconst AuthContext = React.createContext()\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState()\r\n    const [loading, setLoading] = useState(true)\r\n    const [usersChat, setChatUsers] = useState()\r\n  \r\n    function signup(email, password) {\r\n      return auth.createUserWithEmailAndPassword(email, password)\r\n    }\r\n  \r\n    function login(email, password) {\r\n      return auth.signInWithEmailAndPassword(email, password)\r\n    }\r\n  \r\n    function logout() {\r\n      return auth.signOut()\r\n    }\r\n  \r\n    function resetPassword(email) {\r\n      return auth.sendPasswordResetEmail(email)\r\n    }\r\n  \r\n    function updateEmail(email) {\r\n      return currentUser.updateEmail(email)\r\n    }\r\n  \r\n    function updatePassword(password) {\r\n      return currentUser.updatePassword(password)\r\n    }\r\n    function signupChat(email, password) {\r\n      console.log(currentUser)\r\n    }\r\n  \r\n    useEffect(() => {\r\n      const unsubscribe = auth.onAuthStateChanged(user => {\r\n        setCurrentUser(user)\r\n        setLoading(false)\r\n      })\r\n\r\n      return unsubscribe\r\n    }, [])\r\n\r\n    useEffect(async() => {\r\n      if(currentUser){\r\n        let res=await axios.get('https://api.chatengine.io/users/',{\r\n        headers:{\"private-key\":process.env.REACT_APP_CHAT_ENGINE_PRIVATE_KEY}\r\n        })\r\n        setChatUsers(res.data.filter(e=>e.email!=currentUser.email))\r\n       // console.log(res)\r\n      }\r\n    },[currentUser])\r\n  \r\n    const value = {\r\n      currentUser,\r\n      usersChat,\r\n      login,\r\n      signup,\r\n      logout,\r\n      resetPassword,\r\n      updateEmail,\r\n      updatePassword\r\n    }\r\n  \r\n    return (\r\n      <AuthContext.Provider value={value}>\r\n        {!loading && children}\r\n      </AuthContext.Provider>\r\n    )\r\n  }","import React, {useState, useContext, useRef} from 'react'\r\n\r\nconst PeerContext = React.createContext()\r\n\r\nexport function usePeer() {\r\n    return useContext(PeerContext)\r\n}\r\n\r\n\r\nexport function PeerProvider({ children }) {\r\n \r\n    const peer = useRef() \r\n\r\n    const [showVideoCall, setShowVideoCall] = useState(false)\r\n    const [currentCallState, setCurrentCallState] = useState(\"\")\r\n    const [callInformation, setCallInformation] = useState(null)\r\n\r\n    const obj = {\r\n         peer,\r\n         showVideoCall,\r\n         setShowVideoCall,\r\n         currentCallState,\r\n         setCurrentCallState,\r\n         callInformation,\r\n         setCallInformation\r\n        }\r\n\r\n    return (\r\n        \r\n      <PeerContext.Provider value={obj}>\r\n          { children }\r\n      </PeerContext.Provider>\r\n    )\r\n}\r\n\r\n","import React, {useEffect} from 'react'\r\nimport {FiVideo} from 'react-icons/fi'\r\nimport {MdCall} from 'react-icons/md'\r\nimport { IconContext } from \"react-icons\"\r\nimport '../Css/ChatRoomHeader.css'\r\nimport { usePeer } from \"../Contexts/PeerContext\"\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport firebase from './firebase'\r\n\r\nfunction ChatRoomHeader(props) {\r\n\r\n  const {setShowVideoCall, \r\n         setCurrentCallState,\r\n         setCallInformation} = usePeer() \r\n  const {currentUser} = useAuth()\r\n\r\n  useEffect(()=>{\r\n    if(currentUser!=null){\r\n      const call=firebase.firestore().collection('calls').doc(currentUser.email)\r\n      .onSnapshot(async(snapshot)=>{\r\n        if(snapshot.data()&&snapshot.data().type===\"offer\"){\r\n          console.log(snapshot.data())\r\n          setShowVideoCall(true)\r\n          setCurrentCallState(\"callResponse\")\r\n          setCallInformation(snapshot.data())\r\n        } \r\n      })\r\n    }\r\n  },[])\r\n\r\n  const handleMakingCall = () =>{\r\n    setShowVideoCall(true)\r\n    setCurrentCallState(\"callOffer\")\r\n  }\r\n\r\n\r\n    return (\r\n        <div className=\"chatroomHeaderContainer\">\r\n            <br/>\r\n            <h1>{props.title}</h1>\r\n            <div>\r\n            <IconContext.Provider value={{ color: \"green\"}}>\r\n            <FiVideo size={48} onClick={handleMakingCall}/>\r\n            &#160;&#160;&#160;&#160;&#160;\r\n            <MdCall size={48}/>\r\n            </IconContext.Provider>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatRoomHeader\r\n","import { ChatEngine } from 'react-chat-engine';\r\nimport '../Css/ChatRoom.css';\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport ChatRoomHeader from '../Components/ChatRoomHeader'\r\n\r\nfunction ChatRoom() {\r\n\r\n  const {currentUser } = useAuth()\r\n\r\n\r\n  return (\r\n    currentUser != null?\r\n    <ChatEngine\r\n      height=\"90.5vh\"\r\n      projectID={process.env.REACT_APP_CHAT_ENGINE_PROJECT_ID}\r\n      userName={currentUser.email.split(\"@\")[0]}\r\n      userSecret={currentUser.uid}\r\n      renderChatHeader={(chat) => <ChatRoomHeader {...chat}/>}\r\n    />\r\n    : \"Connectez vous\"\r\n  )\r\n}\r\n\r\nexport default ChatRoom;","import React , {useEffect} from 'react'\r\nimport './../Css/Navbar.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport $ from 'jquery';\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport {AiOutlineLogin, AiOutlineHome, AiOutlineLogout} from 'react-icons/ai'\r\nimport {VscSignIn, VscAccount} from 'react-icons/vsc'\r\nimport {BsChatDots} from 'react-icons/bs'\r\nimport { IconContext } from 'react-icons'\r\nconst Navbar = () => {\r\n\r\n  const {currentUser } = useAuth()\r\n\r\n  useEffect(()=>{console.log(currentUser)},[currentUser])\r\n\r\n  function animation(){\r\n    var tabsNewAnim = $('#navbarSupportedContent');\r\n    var activeItemNewAnim = tabsNewAnim.find('.active');\r\n    var activeWidthNewAnimHeight = activeItemNewAnim.innerHeight();\r\n    var activeWidthNewAnimWidth = activeItemNewAnim.innerWidth();\r\n    var itemPosNewAnimTop = activeItemNewAnim.position();\r\n    var itemPosNewAnimLeft = activeItemNewAnim.position();\r\n    $(\".hori-selector\").css({\r\n      \"top\":itemPosNewAnimTop.top + \"px\", \r\n      \"left\":itemPosNewAnimLeft.left + \"px\",\r\n      \"height\": activeWidthNewAnimHeight + \"px\",\r\n      \"width\": activeWidthNewAnimWidth + \"px\"\r\n    });\r\n    $(\"#navbarSupportedContent\").on(\"click\",\"li\",function(e){\r\n      $('#navbarSupportedContent ul li').removeClass(\"active\");\r\n      $(this).addClass('active');\r\n      var activeWidthNewAnimHeight = $(this).innerHeight();\r\n      var activeWidthNewAnimWidth = $(this).innerWidth();\r\n      var itemPosNewAnimTop = $(this).position();\r\n      var itemPosNewAnimLeft = $(this).position();\r\n      $(\".hori-selector\").css({\r\n        \"top\":itemPosNewAnimTop.top + \"px\", \r\n        \"left\":itemPosNewAnimLeft.left + \"px\",\r\n        \"height\": activeWidthNewAnimHeight + \"px\",\r\n        \"width\": activeWidthNewAnimWidth + \"px\"\r\n      });\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    \r\n    animation();\r\n    $(window).on('resize', function(){\r\n      setTimeout(function(){ animation(); }, 500);\r\n    });\r\n    \r\n  }, []);\r\n\r\n  return (\r\n  <IconContext.Provider value={{ size: '22px', style: { verticalAlign: 'middle', marginRight:'7.5px', marginBottom:'3px' } }}>\r\n  <nav className=\"navbar navbar-expand-lg navbar-mainbg\">\r\n    \r\n      <NavLink className=\"navbar-brand navbar-logo\" to=\"/\" exact>\r\n        Web Solutions\r\n      </NavLink>\r\n      <button \r\n        className=\"navbar-toggler\"\r\n        onClick={ function(){\r\n          setTimeout(function(){ animation(); });\r\n        }}\r\n        type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <i className=\"fas fa-bars text-white\"></i>\r\n      </button>\r\n \r\n      <div \r\n        className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n        {\r\n        currentUser!=null?\r\n        <ul className=\"navbar-nav ml-auto\">\r\n            \r\n        <div className=\"hori-selector\">\r\n          <div className=\"left\"></div>\r\n          <div className=\"right\"></div>\r\n        </div>\r\n        \r\n        <li className=\"nav-item active\">\r\n          <NavLink className=\"nav-link\" to=\"/\" exact>\r\n          <AiOutlineHome/>Home\r\n          </NavLink>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <NavLink className=\"nav-link\" to=\"/\" exact>\r\n            <i \r\n            className=\"far fa-address-book\">\r\n            </i>About\r\n          </NavLink> \r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <NavLink className=\"nav-link\" to=\"#\" exact>\r\n            <AiOutlineLogout/>Logout\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <NavLink className=\"nav-link\" to=\"/my-account\" exact>\r\n            <VscAccount/>My Account\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <NavLink className=\"nav-link\" to=\"/chat\" exact>\r\n          <BsChatDots/>Discussion \r\n          </NavLink>\r\n        </li>\r\n    </ul>\r\n        :\r\n        <ul className=\"navbar-nav ml-auto\">\r\n            \r\n        <div className=\"hori-selector\">\r\n          <div className=\"left\"></div>\r\n          <div className=\"right\"></div>\r\n        </div>\r\n        \r\n        <li className=\"nav-item active\">\r\n          <NavLink className=\"nav-link\" to=\"/\" exact>\r\n          <AiOutlineHome/>Home\r\n          </NavLink>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <NavLink className=\"nav-link\" to=\"/signup\" exact>\r\n           <VscSignIn/>Signup\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <NavLink className=\"nav-link\" to=\"/login\" exact>\r\n          <AiOutlineLogin/>\r\n          Login\r\n          </NavLink>\r\n        </li>\r\n    </ul>\r\n        }\r\n      </div>\r\n  </nav>\r\n  </IconContext.Provider>\r\n  )\r\n}\r\nexport default Navbar;","import React, {useEffect, useRef, useState} from 'react'\r\nimport {Modal} from 'react-bootstrap'\r\nimport { usePeer } from \"../Contexts/PeerContext\"\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport * as Peer from 'simple-peer'\r\nimport firebase from './firebase'\r\nimport '../Css/Video.css'\r\nimport  {AiOutlineAudioMuted, AiOutlineAudio} from 'react-icons/ai'\r\nimport {FiVideo, FiVideoOff} from 'react-icons/fi'\r\nimport {MdCallEnd, MdCall} from 'react-icons/md'\r\nfunction VideoCallContainer() {\r\n\r\n    const {showVideoCall, currentCallState, callInformation } = usePeer() \r\n    const {usersChat, currentUser } = useAuth()   \r\n\r\n    const videoEmitter = useRef()\r\n    const videoReceiver = useRef()\r\n    const peer =useRef()\r\n\r\n    const [answerCall, setAnswerCall] = useState(false)\r\n    const [cameraOn, setCameraOn] = useState(true) \r\n    const [soundOn, setSoundOn] = useState(true)\r\n\r\n    useEffect(async ()=>{\r\n        if(showVideoCall){\r\n          // case emitter\r\n          if(currentCallState===\"callOffer\"){\r\n            videoEmitter.current.srcObject=await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n            videoEmitter.current.play()\r\n            peer.current=new Peer({\r\n                initiator:true,\r\n                stream:videoEmitter.current.srcObject,\r\n                trickle:false, \r\n                config:{\r\n                  iceServers: [\r\n                    {\r\n                      urls: ['stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302'],\r\n                    },\r\n                  ],\r\n                  iceCandidatePoolSize: 10,\r\n                }\r\n            })\r\n            peer.current.on('signal',async(data)=>{\r\n            const addCall=firebase.firestore().collection('calls').doc(usersChat[0].email)\r\n            .set({\r\n                type:\"offer\",\r\n                from:currentUser.email,\r\n                sd:JSON.stringify(data)\r\n            })\r\n            return addCall\r\n            })\r\n        } \r\n        // case receiver\r\n        else if (currentCallState===\"callResponse\"){\r\n            videoEmitter.current.srcObject=await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n            videoEmitter.current.play()\r\n        }\r\n        }\r\n    },[showVideoCall, currentCallState])\r\n\r\n    useEffect(()=>{\r\n        const call=firebase.firestore().collection('calls').doc(currentUser.email)\r\n        .onSnapshot(async(snapshot)=>{\r\n          if(snapshot.data()&&snapshot.data().type===\"response\"){\r\n            peer.current.signal(JSON.parse(snapshot.data().sd))\r\n            \r\n            peer.current.on('stream',(data)=>{\r\n                setAnswerCall(true)\r\n                videoReceiver.current.srcObject=data\r\n                videoReceiver.current.play()\r\n              }) \r\n          } \r\n        })\r\n    },[])\r\n\r\n    const handleAnswerCall = () => {\r\n      setAnswerCall(true)\r\n      peer.current=new Peer({\r\n        initiator:false,\r\n        stream:videoEmitter.current.srcObject,\r\n        trickle:false, \r\n        config:{\r\n          iceServers: [\r\n            {\r\n              urls: ['stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302'],\r\n            },\r\n          ],\r\n          iceCandidatePoolSize: 10,\r\n        }\r\n      })\r\n      peer.current.signal(JSON.parse(callInformation.sd))\r\n      peer.current.on('signal',(data)=>{\r\n        firebase.firestore().collection('calls').doc(callInformation.from)\r\n        .set({\r\n          type:\"response\",\r\n          from:currentUser.email,\r\n          sd:JSON.stringify(data)\r\n        })\r\n      })\r\n      peer.current.on('stream',(data)=>{\r\n        videoReceiver.current.srcObject=data\r\n        videoReceiver.current.play()\r\n      }) \r\n    }\r\n\r\n    const handleCameraOnOff=()=>{\r\n      videoEmitter.current.srcObject.getVideoTracks()[0].enabled = !videoEmitter.current.srcObject.getVideoTracks()[0].enabled\r\n      setCameraOn(!cameraOn)\r\n      console.log(peer.current)\r\n    }\r\n    const handleSoundOnOff=()=>{\r\n      videoEmitter.current.srcObject.getAudioTracks()[0].enabled = !videoEmitter.current.srcObject.getAudioTracks()[0].enabled\r\n      setSoundOn(!soundOn)\r\n    }\r\n    const handleDestroyCall=()=>{\r\n      peer.current.destroy()\r\n      console.log(\"destroy\")\r\n    }\r\n    return (\r\n        <Modal show={showVideoCall} size=\"lg\"\r\n        centered\r\n        >\r\n           <div className=\"videosContainer\">\r\n           <video ref={videoEmitter} className=\"videoEmitter\"></video> \r\n           { answerCall?\r\n           <video ref={videoReceiver} className=\"videoReceiver\"></video>\r\n           :false}\r\n           </div>\r\n           <button onClick={handleAnswerCall}>answer the call</button>\r\n           <div className=\"videoActions\"> \r\n          {!cameraOn?<FiVideo size={48} onClick={handleCameraOnOff}/>:\r\n          <FiVideoOff size={48} onClick={handleCameraOnOff}/>}\r\n          {!soundOn?<AiOutlineAudio size={48} onClick={handleSoundOnOff}/>\r\n          :<AiOutlineAudioMuted size={48} onClick={handleSoundOnOff}/>}\r\n          <MdCallEnd size={48} onClick={handleDestroyCall}/>\r\n           </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default VideoCallContainer\r\n","import {useRef, useState} from 'react'\r\nimport { Form, Button, Card, Alert, Modal } from \"react-bootstrap\"\r\nimport { useAuth} from \"../Contexts/AuthContext\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport ReactDom from \"react-dom\"\r\nimport axios from 'axios'\r\n\r\nconst getFile =async(url)=>{\r\n  const response = await fetch(url)\r\n  const data = await response.blob()\r\n  return new File([data], \"userPhoto.jpg\", {type:\"image/jpeg\"})\r\n}\r\n\r\nfunction SignUp() {\r\n\r\n    const emailRef = useRef()\r\n    const passwordRef = useRef()\r\n    const passwordConfirmRef = useRef()\r\n\r\n    const { signup, currentUser } = useAuth()\r\n\r\n    const [error, setError] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [show, setShow] = useState(true)\r\n\r\n    const history = useHistory()\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault()\r\n        if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n          return setError(\"Passwords do not match\")\r\n        }\r\n    \r\n        try {\r\n          setError(\"\")\r\n          setLoading(true)\r\n          const signupData=await signup(emailRef.current.value, passwordRef.current.value)\r\n          const formdata=new FormData()\r\n\r\n          formdata.append('email', signupData.user.email)\r\n          formdata.append('username', signupData.user.email.split('@')[0])\r\n          formdata.append('secret', signupData.user.uid)\r\n          \r\n          /*const avatar=getFile(signupData.photoURL)\r\n          formdata.append('avatar', avatar, avatar.name)*/\r\n\r\n          const res = axios.post('https://api.chatengine.io/users',formdata,\r\n          {\r\n            headers: {\"private-key\":process.env.REACT_APP_CHAT_ENGINE_PRIVATE_KEY}\r\n          })\r\n          console.log(res)\r\n            //history.push(\"/chatroom\")\r\n        } catch {\r\n          setError(\"Failed to create an account\")\r\n        }\r\n    \r\n        setLoading(false)\r\n      }\r\n\r\n    return (\r\n        <Modal show={show} centered>\r\n        <Card>\r\n          <Card.Body>\r\n            <h2 className=\"text-center mb-4\">Sign Up</h2>\r\n            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            <Form onSubmit={handleSubmit}>\r\n              <Form.Group id=\"email\">\r\n                <Form.Label>Email</Form.Label>\r\n                <Form.Control type=\"email\" ref={emailRef} required />\r\n              </Form.Group>\r\n              <Form.Group id=\"password\">\r\n                <Form.Label>Password</Form.Label>\r\n                <Form.Control type=\"password\" ref={passwordRef} required />\r\n              </Form.Group>\r\n              <Form.Group id=\"password-confirm\">\r\n                <Form.Label>Password Confirmation</Form.Label>\r\n                <Form.Control type=\"password\" ref={passwordConfirmRef} required />\r\n              </Form.Group>\r\n              <Button disabled={loading} className=\"w-100\" type=\"submit\">\r\n                Sign Up\r\n              </Button>\r\n            </Form>\r\n          </Card.Body>\r\n          <Card.Footer>\r\n          <Button variant=\"primary\" onClick={() => setShow(false)}>\r\n        Exit\r\n      </Button>\r\n          </Card.Footer>\r\n        </Card>\r\n        <div className=\"w-100 text-center mt-2\">\r\n          Already have an account? <Link to=\"/login\">Log In</Link>\r\n        </div>\r\n      </Modal>\r\n    )\r\n}\r\n\r\nexport default SignUp\r\n","import React, { useRef, useState, useEffect } from \"react\"\r\nimport { Form, Button, Card, Alert, Modal } from \"react-bootstrap\"\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\n\r\nexport default function Login() {\r\n  const emailRef = useRef()\r\n  const passwordRef = useRef()\r\n  const { login, currentUser } = useAuth()\r\n  const [error, setError] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [show, setShow] = useState(true)\r\n\r\n  const history = useHistory()\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault()\r\n\r\n    try {\r\n      setError(\"\")\r\n      setLoading(true)\r\n      await login(emailRef.current.value, passwordRef.current.value)\r\n      console.log(currentUser)\r\n    } catch {\r\n      setError(\"Failed to log in\")\r\n    }\r\n\r\n    setLoading(false)\r\n  }\r\n\r\n  return (\r\n    <Modal show={show} centered>\r\n      <Card>\r\n        <Card.Body>\r\n          <h2 className=\"text-center mb-4\">Log In</h2>\r\n          {error && <Alert variant=\"danger\">{error}</Alert>}\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group id=\"email\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control type=\"email\" ref={emailRef} required />\r\n            </Form.Group>\r\n            <Form.Group id=\"password\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control type=\"password\" ref={passwordRef} required />\r\n            </Form.Group>\r\n            <Button disabled={loading} className=\"w-100\" type=\"submit\">\r\n              Log In\r\n            </Button>\r\n          </Form>\r\n          <div className=\"w-100 text-center mt-3\">\r\n            <Link to=\"/forgot-password\">Forgot Password?</Link>\r\n          </div>\r\n        </Card.Body>\r\n        <Modal.Footer>\r\n        <Button variant=\"primary\" onClick={() => setShow(false)}>\r\n        Exit\r\n      </Button>\r\n      </Modal.Footer>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        Need an account? <Link to=\"/signup\">Sign Up</Link>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}","  \r\nimport React, { useState } from \"react\"\r\nimport { Card, Button, Alert, Modal } from \"react-bootstrap\"\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\n\r\n function Dashboard() {\r\n  const [error, setError] = useState(\"\")\r\n  const [show, setShow] = useState(true)\r\n\r\n  const { currentUser, logout } = useAuth()\r\n  const history = useHistory()\r\n\r\n  async function handleLogout() {\r\n    setError(\"\")\r\n\r\n    try {\r\n      await logout()\r\n      history.push(\"/login\")\r\n    } catch {\r\n      setError(\"Failed to log out\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal show={show} centered>\r\n      <Card>\r\n        <Card.Body>\r\n          <h2 className=\"text-center mb-4\">Profile</h2>\r\n          {error && <Alert variant=\"danger\">{error}</Alert>}\r\n          <strong>Email:</strong> {currentUser!=null&&currentUser.email}\r\n          <Link to=\"/update-profile\" className=\"btn btn-primary w-100 mt-3\">\r\n            Update Profile\r\n          </Link>\r\n        </Card.Body>\r\n        <Card.Footer>\r\n        <Button variant=\"primary\" onClick={() => setShow(false)}>\r\n        Exit\r\n      </Button>\r\n        </Card.Footer>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        <Button variant=\"link\" onClick={handleLogout}>\r\n          Log Out\r\n        </Button>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\nexport default Dashboard","import React, { useRef, useState } from \"react\"\r\nimport { Form, Button, Card, Alert, Modal } from \"react-bootstrap\"\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nexport default function ForgotPassword() {\r\n  const emailRef = useRef()\r\n  const { resetPassword } = useAuth()\r\n  const [error, setError] = useState(\"\")\r\n  const [message, setMessage] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [show, setShow] = useState(true)\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault()\r\n\r\n    try {\r\n      setMessage(\"\")\r\n      setError(\"\")\r\n      setLoading(true)\r\n      await resetPassword(emailRef.current.value)\r\n      setMessage(\"Check your inbox for further instructions\")\r\n    } catch {\r\n      setError(\"Failed to reset password\")\r\n    }\r\n\r\n    setLoading(false)\r\n  }\r\n\r\n  return (\r\n    <Modal show={show} centered>\r\n      <Card>\r\n        <Card.Body>\r\n          <h2 className=\"text-center mb-4\">Password Reset</h2>\r\n          {error && <Alert variant=\"danger\">{error}</Alert>}\r\n          {message && <Alert variant=\"success\">{message}</Alert>}\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group id=\"email\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control type=\"email\" ref={emailRef} required />\r\n            </Form.Group>\r\n            <Button disabled={loading} className=\"w-100\" type=\"submit\">\r\n              Reset Password\r\n            </Button>\r\n          </Form>\r\n          <div className=\"w-100 text-center mt-3\">\r\n            <Link to=\"/login\">Login</Link>\r\n          </div>\r\n        </Card.Body>\r\n        <Card.Footer>\r\n        <Button variant=\"primary\" onClick={() => setShow(false)}>\r\n        Exit\r\n      </Button>\r\n      </Card.Footer>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        Need an account? <Link to=\"/signup\">Sign Up</Link>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}","import React, { useRef, useState } from \"react\"\r\nimport { Form, Button, Card, Alert, Modal } from \"react-bootstrap\"\r\nimport { useAuth } from \"../Contexts/AuthContext\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\n\r\nexport default function UpdateProfile() {\r\n  const emailRef = useRef()\r\n  const passwordRef = useRef()\r\n  const passwordConfirmRef = useRef()\r\n\r\n  const { currentUser, updatePassword, updateEmail } = useAuth()\r\n\r\n  const [error, setError] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [show, setShow] = useState(true)\r\n\r\n  const history = useHistory()\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    if (passwordRef.current.value !== passwordConfirmRef.current.value) {\r\n      return setError(\"Passwords do not match\")\r\n    }\r\n\r\n    const promises = []\r\n    setLoading(true)\r\n    setError(\"\")\r\n\r\n    if (emailRef.current.value !== currentUser.email) {\r\n      promises.push(updateEmail(emailRef.current.value))\r\n    }\r\n    if (passwordRef.current.value) {\r\n      promises.push(updatePassword(passwordRef.current.value))\r\n    }\r\n\r\n    Promise.all(promises)\r\n      .then(() => {\r\n        history.push(\"/\")\r\n      })\r\n      .catch(() => {\r\n        setError(\"Failed to update account\")\r\n      })\r\n      .finally(() => {\r\n        setLoading(false)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <Modal show={show} centered>\r\n      <Card>\r\n        <Card.Body>\r\n          <h2 className=\"text-center mb-4\">Update Profile</h2>\r\n          {error && <Alert variant=\"danger\">{error}</Alert>}\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group id=\"email\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control\r\n                type=\"email\"\r\n                ref={emailRef}\r\n                required\r\n                defaultValue={currentUser!=null && currentUser.email}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group id=\"password\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                ref={passwordRef}\r\n                placeholder=\"Leave blank to keep the same\"\r\n              />\r\n            </Form.Group>\r\n            <Form.Group id=\"password-confirm\">\r\n              <Form.Label>Password Confirmation</Form.Label>\r\n              <Form.Control\r\n                type=\"password\"\r\n                ref={passwordConfirmRef}\r\n                placeholder=\"Leave blank to keep the same\"\r\n              />\r\n            </Form.Group>\r\n            <Button disabled={loading} className=\"w-100\" type=\"submit\">\r\n              Update\r\n            </Button>\r\n          </Form>\r\n        </Card.Body>\r\n        <Card.Footer>\r\n        <Button variant=\"primary\" onClick={() => setShow(false)}>\r\n        Exit\r\n      </Button>\r\n        </Card.Footer>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        <Link to=\"/\">Cancel</Link>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}","import React from 'react';\nimport { Container } from \"react-bootstrap\";\nimport { \n  HashRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from 'react-router-dom'\nimport './App.css'\n\n\nimport ChatRoom from './pages/ChatRoom'\nimport Navbar from './Components/Navbar';\nimport VideoChatContainer from './Components/videoCallContainer';\n\nimport Signup from './Components/SignUp';\nimport Login from './Components/Login';\nimport Profil from './Components/Profil'\nimport ForgotPassword from './Components/ForgotPassword';\nimport UpdateProfil from './Components/UpdateProfile';\n\nimport {AuthProvider} from './Contexts/AuthContext'\nimport {PeerProvider} from './Contexts/PeerContext'\n\nconst App = () => {\n  return (\n  <PeerProvider>\n  <AuthProvider>\n  <div className=\"App\">\n   <Router>\n    <Navbar/>\n    <main>\n      <Switch>\n        <Route path=\"/\" exact>\n        </Route>\n        <Route path=\"/forgot-password\" exact>\n        <Container\n      className=\"d-flex align-items-center justify-content-center\"\n      style={{ minHeight: \"100vh\" }}\n    >\n      <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\n      <ForgotPassword/>\n      </div>\n    </Container>\n        </Route>\n        <Route path=\"/signup\" exact>\n        <Container\n      className=\"d-flex align-items-center justify-content-center\"\n      style={{ minHeight: \"100vh\" }}\n    >\n      <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\n      <Signup/>\n      </div>\n    </Container>\n        </Route>\n        <Route path=\"/login\" exact>\n        <Container\n      className=\"d-flex align-items-center justify-content-center\"\n      style={{ minHeight: \"100vh\" }}\n    >\n      <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\n      <Login/>\n      </div>\n    </Container>\n        </Route>\n        <Route path=\"/my-account\" exact>\n        <Container\n      className=\"d-flex align-items-center justify-content-center\"\n      style={{ minHeight: \"100vh\" }}\n    >\n      <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\n      <Profil/>\n      </div>\n    </Container>\n        </Route>\n        <Route path=\"/update-profile\" exact>\n        <Container\n      className=\"d-flex align-items-center justify-content-center\"\n      style={{ minHeight: \"100vh\" }}\n    >\n      <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\n      <UpdateProfil/>\n      </div>\n    </Container>\n        </Route>\n        <Route path=\"/chat\" exact>\n          <ChatRoom/>\n          <VideoChatContainer/>\n        </Route>\n        <Redirect to=\"/\" />\n      </Switch>\n    </main>\n   </Router>\n  </div>\n  </AuthProvider>\n  </PeerProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}